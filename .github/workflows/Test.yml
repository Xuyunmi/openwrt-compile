name: Test
on: 
 workflow_dispatch:

jobs:
  build:
    name: Build my artifact
    runs-on: ubuntu-latest
    steps:

    - name: check
      uses: actions/checkout@main
      
    - name: Initialization Environment
      env:
        DEBIAN_FRONTEND: noninteractive
      run: |
        df -h && ls
        sudo rm -rf /etc/apt/sources.list.d/* /usr/share/dotnet /etc/mysql /usr/local/lib/android
        #sudo -E apt-get -qq update
        #sudo -E apt-get -qq install $(curl -fsSL is.gd/depends_ubuntu_2204)
        #sudo sh build.sh
        sudo -E apt-get -qq autoremove --purge
        sudo -E apt-get -qq clean
        #sudo timedatectl set-timezone "$TZ"
        df -h
        sudo rm -rf /usr/share/dotnet /usr/local/lib/android /opt/ghc /opt/hostedtoolcache/CodeQL
    

    - name: Build
      run: |
          echo "Free space:"
          df -h
          cd /usr/local
          du -lh --max-depth=2
          cd /usr/share
          #du -lh --max-depth=2
          cd /usr/local/.ghcup
          ls -lh
          sudo rm -rf /usr/local/.ghcup
          df -h
          
